<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>IBGEA-QRQC</title>
    <link rel="stylesheet" href="css/mainIndicateurs.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script lang="javascript" src="js/indicateurs.js"></script>
  </head>
  <body>
    
    <div class="sidebar">
        <div class="logo-details">
            <img src="img/1631345488529.jpeg" alt="Logo" style="width: 40px; height: 40px;">
            <br>
            <span class="logo_name">IBGEA-QRQC</span>
          </div>
          
      <ul class="nav-links">
        <li>
          <a href="index.html">
            <i class='bx bx-grid-alt' ></i>
            <span class="links_name">tableau de bord</span>
          </a>
        </li>
        <li>
          <a href="indicateurs.html" class="active">
            <i class='bx bx-box' ></i>
            <span class="links_name">Indicateurs-Actions</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-list-ul' ></i>
            <span class="links_name">Order list</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-pie-chart-alt-2' ></i>
            <span class="links_name">Analytics</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-coin-stack' ></i>
            <span class="links_name">Stock</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-book-alt' ></i>
            <span class="links_name">Total order</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-user' ></i>
            <span class="links_name">Team</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-message' ></i>
            <span class="links_name">Messages</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-heart' ></i>
            <span class="links_name">Favrorites</span>
          </a>
        </li>
        <li>
          <a href="#">
            <i class='bx bx-cog' ></i>
            <span class="links_name">Setting</span>
          </a>
        </li>
        <li class="log_out">
          <a href="#">
            <i class='bx bx-log-out'></i>
            <span class="links_name">Log out</span>
          </a>
        </li>
      </ul>
    </div>

    <section class="home-section">
      <nav>
        <div class="sidebar-button">
          <i class='bx bx-menu sidebarBtn'></i>
          <span class="dashboard">Indicateurs-Actions</span>
        </div>
        <div class="search-box">
          <input type="text" placeholder="Search...">
          <i class='bx bx-search'></i>
        </div>
        <div class="profile-details">
          <img src="images/profile.jpg" alt="">
          <span class="admin_name">Oufadel Issam</span>
          <i class='bx bx-chevron-down'></i>
        </div>
      </nav>

      <br><br><br>
      <div class="table-container">
       <br>
        <button class="btn btn-primary add-button" onclick="toggleForm()">Ajouter</button>
        <br>
        <!-- Form-->
        <div id="add-form" style="display:none;">
          <form id="indicateur-form">
            <div class="form-group">
              <label for="creation-date">N°:</label>
              <input type="text" class="form-control" id="n" required>
              <label for="creation-date">Création:</label>
              <input type="date" class="form-control" id="creation-date" required>
            </div>
            <div class="form-group">
              <label for="problem">Problème:</label>
              <input type="text" class="form-control" id="problem" required>
            </div>
            <div class="form-group">
              <label for="actions">Actions:</label>
              <input type="text" class="form-control" id="actions" required>
            </div>
            <div class="form-group">
              <label for="responsables">Responsables:</label>
              <input type="text" class="form-control" id="responsables" required>
            </div>
            <div class="form-group">
              <label for="end-date">Date fin:</label>
              <input type="date" class="form-control" id="end-date" required>
            </div>
            <div class="form-group">
              <label for="reschedule-date">Date replan:</label>
              <input type="date" class="form-control" id="reschedule-date" required>
            </div>
            <div class="form-group">
              <label for="closure-date">Date clôture:</label>
              <input type="date" class="form-control" id="closure-date" required>
            </div>
            <div class="form-group">
              <label for="status">Status:</label>
              <select class="form-control" id="status" required>
                <option value="En cours">En cours</option>
                <option value="Terminé">Terminé</option>
                <option value="À vérifier">À vérifier</option>
              </select>
            </div>
            <div class="form-group">
              <label for="capitalisation">Capitalisation:</label>
              <input type="text" class="form-control" id="capitalisation" required>
            </div>
            <button type="submit" class="btn btn-success">Enregistrer</button>
          </form>
        </div>

        <br><br>
        <table class="table">
          <thead>
            <tr>
              <th>N°</th>
              <th>Création</th>
              <th>Problème</th>
              <th>Actions</th>
              <th>Responsables</th>
              <th>Date fin</th>
              <th>Date replan</th>
              <th>Date clôture</th>
              <th>Status</th>
              <th>Capitalisation</th>
              <th>Actions</th> 
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>10/03/2025</td>
              <td>Problème de production</td>
              <td>Révision du processus</td>
              <td>oufadel issam</td>
              <td>20/03/2025</td>
              <td>25/03/2025</td>
              <td>30/03/2025</td>
              <td>En cours</td>
              <td>Documenté</td>
              <td>
                <button class="btn btn-info btn-sm" onclick="editRow(this)"><i class='bx bx-pencil'></i></button>
                <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"><i class='bx bx-trash'></i></button>
              </td>
            </tr>
            <tr>
              <td>2</td>
              <td>12/03/2025</td>
              <td>Erreur qualité</td>
              <td>Formation équipe</td>
              <td>bouchiha riham</td>
              <td>22/03/2025</td>
              <td>27/03/2025</td>
              <td>01/04/2025</td>
              <td>Terminé</td>
              <td>À vérifier</td>
              <td>
                <button class="btn btn-info btn-sm" onclick="editRow(this)"><i class='bx bx-pencil'></i></button>
                <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"><i class='bx bx-trash'></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <script>
      function toggleForm() {
        var form = document.getElementById("add-form");
        if (form.style.display === "none") {
          form.style.display = "block";
        } else {
          form.style.display = "none";
        }
      }

      document.getElementById("indicateur-form").addEventListener("submit", function(event) {
        event.preventDefault();
        
        var newRow = document.createElement("tr");

        newRow.innerHTML = `
          <td></td>
          <td>${document.getElementById("creation-date").value}</td>
          <td>${document.getElementById("problem").value}</td>
          <td>${document.getElementById("actions").value}</td>
          <td>${document.getElementById("responsables").value}</td>
          <td>${document.getElementById("end-date").value}</td>
          <td>${document.getElementById("reschedule-date").value}</td>
          <td>${document.getElementById("closure-date").value}</td>
          <td>${document.getElementById("status").value}</td>
          <td>${document.getElementById("capitalisation").value}</td>
          <td>
            <button class="btn btn-info btn-sm" onclick="editRow(this)"><i class='bx bx-pencil'></i></button>
            <button class="btn btn-danger btn-sm" onclick="deleteRow(this)"><i class='bx bx-trash'></i></button>
          </td>
        `;
        
        document.querySelector("table tbody").appendChild(newRow);
        toggleForm();
      });

      function deleteRow(button) {
        var row = button.closest("tr");
        row.remove();
      }

      function editRow(button) {
        var row = button.closest("tr");
        var cells = row.querySelectorAll("td");

        document.getElementById("n").value = cells[0].textContent;
        document.getElementById("creation-date").value = cells[1].textContent;
        document.getElementById("problem").value = cells[2].textContent;
        document.getElementById("actions").value = cells[3].textContent;
        document.getElementById("responsables").value = cells[4].textContent;
        document.getElementById("end-date").value = cells[5].textContent;
        document.getElementById("reschedule-date").value = cells[6].textContent;
        document.getElementById("closure-date").value = cells[7].textContent;
        document.getElementById("status").value = cells[8].textContent;
        document.getElementById("capitalisation").value = cells[9].textContent;

        row.remove();
      }
    </script>
     <script>
      let sidebar = document.querySelector(".sidebar");
   let sidebarBtn = document.querySelector(".sidebarBtn");
   sidebarBtn.onclick = function() {
     sidebar.classList.toggle("active");
     if(sidebar.classList.contains("active")){
     sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
   }else
     sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
   }
    </script>
    <script>
      function toggleForm() {
        var form = document.getElementById("add-form");
        form.style.display = form.style.display === "none" ? "block" : "none"; 
      }
    
      document.getElementById("indicateur-form").addEventListener("submit", function(event) {
        event.preventDefault();
    
        var num = document.getElementById("n").value;
        var creationDate = document.getElementById("creation-date").value;
        var problem = document.getElementById("problem").value;
        var actions = document.getElementById("actions").value;
        var responsables = document.getElementById("responsables").value;
        var endDate = document.getElementById("end-date").value;
        var rescheduleDate = document.getElementById("reschedule-date").value;
        var closureDate = document.getElementById("closure-date").value;
        var status = document.getElementById("status").value;
        var capitalisation = document.getElementById("capitalisation").value;
    
        var row = document.getElementById("edit-row"); 
    
        if (row) {
          var cells = row.querySelectorAll("td");
          cells[0].textContent = num;
          cells[1].textContent = creationDate;
          cells[2].textContent = problem;
          cells[3].textContent = actions;
          cells[4].textContent = responsables;
          cells[5].textContent = endDate;
          cells[6].textContent = rescheduleDate;
          cells[7].textContent = closureDate;
          cells[8].textContent = status;
          cells[9].textContent = capitalisation;
    
          toggleForm();
        }
      });
    
      function editRow(button) {
        var row = button.closest("tr"); 
        row.id = "edit-row"; 
        var cells = row.querySelectorAll("td");
    
        document.getElementById("n").value = cells[0].textContent;
        document.getElementById("creation-date").value = cells[1].textContent;
        document.getElementById("problem").value = cells[2].textContent;
        document.getElementById("actions").value = cells[3].textContent;
        document.getElementById("responsables").value = cells[4].textContent;
        document.getElementById("end-date").value = cells[5].textContent;
        document.getElementById("reschedule-date").value = cells[6].textContent;
        document.getElementById("closure-date").value = cells[7].textContent;
        document.getElementById("status").value = cells[8].textContent;
        document.getElementById("capitalisation").value = cells[9].textContent;
        toggleForm();
      }
      function deleteRow(button) {
        const confirmation = confirm("Êtes-vous sûr de vouloir supprimer cet élément ?");
          if (confirmation) {
            const row = button.closest("tr");
                row.remove();
    }
}

    </script>
    
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
